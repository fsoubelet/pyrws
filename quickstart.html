<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; pyrws 0.2.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-variables.4b15212bc2faf4da239d738a7cf8e545.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PYRWS Command Line" href="modules/index.html" />
    <link rel="prev" title="Welcome to PyRWS’s Documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pyrws
          </a>
              <div class="version">
                0.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-commandline-tool">Using the CommandLine Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#program-worfklow">Program Worfklow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules/index.html">PYRWS Command Line</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules/index.html#pyrws">pyrws</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules/index.html#module-pyrws.constants">PYRWS Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules/index.html#useful-constants">Useful Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/index.html#checkers-functionality">Checkers Functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/index.html#core-functionality">Core Functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/index.html#plotting-functions">Plotting Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/index.html#utilities">Utilities</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyrws</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Quickstart</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/Felix Soubelet/pyrws/blob/master/doc/quickstart.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<span id="quickstart-top"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline"></a></h1>
<section id="installation">
<span id="quickstart-install"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
<p>This package requires <code class="xref py py-obj docutils literal notranslate"><span class="pre">Python</span> <span class="pre">3.8+</span></code>.
You can install it simply from <code class="docutils literal notranslate"><span class="pre">PyPI</span></code> in a virtual environment with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">pip install pyrws</span>
</pre></div></div><div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Don’t know what a virtual environment is or how to set it up?
Here is a good primer on <a class="reference external" href="https://realpython.com/python-virtual-environments-a-primer/">virtual environments</a> by <code class="xref py py-obj docutils literal notranslate"><span class="pre">RealPython</span></code>.</p>
</div>
</section>
<section id="using-the-commandline-tool">
<h2>Using the CommandLine Tool<a class="headerlink" href="#using-the-commandline-tool" title="Permalink to this headline"></a></h2>
<p>One can use the tool by simply calling it with the <code class="docutils literal notranslate"><span class="pre">-m</span></code> flag at the commandline. For instance, to display the help message and usage options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python -m pyrws --help</span>
</pre></div></div><p>To see these options, refer to the <a class="reference internal" href="modules/index.html#pyrws-cli"><span class="std std-ref">following page</span></a>.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p>Below is an example call to the tool. It calls the program for given <strong>sequence</strong> and <strong>opticsfile</strong> inputs,
and asks for the creation of an improved rigid waist shift knob at IP1, with a unit setting of 1.</p>
<p>The outputs will be written to a newly created <strong>waist_shift</strong> folder, will use a <strong>figsize</strong> of (20, 9) for
the created plots, and will display them in interactive <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> windows before exiting.</p>
<p>The logging level is set to show all log messages with a level of <code class="docutils literal notranslate"><span class="pre">debug</span></code> or above.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python -m pyrws <span class="se">\</span>
  --sequence /path/to/lhc_as-built.seq <span class="se">\</span>
  --opticsfile /path/to/proton/opticsfiles/opticsfile.22 <span class="se">\</span>
  --ip <span class="m">1</span> <span class="se">\</span>
  --waist_shift_setting <span class="m">1</span> <span class="se">\</span>
  --outputdir waist_shift <span class="se">\</span>
  --show_plots <span class="nb">true</span> <span class="se">\</span>
  --figsize <span class="m">20</span> <span class="m">9</span> <span class="se">\</span>
  --loglevel debug</span>
</pre></div></div><details class="sphinx-bs dropdown card mb-3 fade-in-slide-down">
<summary class="summary-title card-header text-center">
Show the Output Folder Structure<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">Here is the complete structure of the output folder. For each <code class="docutils literal notranslate"><span class="pre">LHC</span></code> beam, a folder is created in which
one can find:</p>
<ul class="simple">
<li><p class="card-text">a subfolder with <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> knobs (absolute values and change to nominal configuration),</p></li>
<li><p class="card-text">a subfolder with all exported plots,</p></li>
<li><p class="card-text">a subfolder with all <strong>TFS</strong> files,</p></li>
<li><p class="card-text">the generated <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code> scripts and their outputs.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>waist_shift
├── BEAM1
│   ├── KNOBS
│   │   ├── quadrupoles.madx
│   │   ├── quadrupoles_change.madx
│   │   ├── triplets.madx
│   │   └── triplets_change.madx
│   ├── PLOTS
│   │   ├── bare_vs_matched_betabeatings.pdf
│   │   ├── betas.pdf
│   │   ├── betas_deviations.pdf
│   │   ├── matched_waist_shift_betabeatings.pdf
│   │   ├── phase_advances.pdf
│   │   ├── phase_differences.pdf
│   │   └── waist_shift_betabeatings.pdf
│   ├── TFS
│   │   ├── bare_waist_b1.tfs
│   │   ├── bare_waist_b1_monitors.tfs
│   │   ├── matched_waist_b1.tfs
│   │   ├── matched_waist_b1_monitors.tfs
│   │   ├── nominal_b1.tfs
│   │   └── nominal_b1_monitors.tfs
│   ├── nominal_b1.madx
│   ├── nominal_b1.out
│   ├── waist_b1.madx
│   └── waist_b1.out
└── BEAM2
    ├── KNOBS
    │   ├── quadrupoles.madx
    │   ├── quadrupoles_change.madx
    │   ├── triplets.madx
    │   └── triplets_change.madx
    ├── PLOTS
    │   ├── bare_vs_matched_betabeatings.pdf
    │   ├── betas.pdf
    │   ├── betas_deviations.pdf
    │   ├── matched_waist_shift_betabeatings.pdf
    │   ├── phase_advances.pdf
    │   ├── phase_differences.pdf
    │   └── waist_shift_betabeatings.pdf
    ├── TFS
    │   ├── bare_waist_b2.tfs
    │   ├── bare_waist_b2_monitors.tfs
    │   ├── matched_waist_b2.tfs
    │   ├── matched_waist_b2_monitors.tfs
    │   ├── nominal_b2.tfs
    │   └── nominal_b2_monitors.tfs
    ├── nominal_b2.madx
    ├── nominal_b2.out
    ├── waist_b2.madx
    └── waist_b2.out
</pre></div>
</div>
</div>
</details></div>
</section>
<section id="program-worfklow">
<h2>Program Worfklow<a class="headerlink" href="#program-worfklow" title="Permalink to this headline"></a></h2>
<p>The program’s workflow is reflected in the logs, and goes as follows:</p>
<ol class="arabic simple">
<li><p>Run the nominal scenario for beam 1, corresponding to the provided <em>opticsfile</em> and working point.</p></li>
<li><p>Apply a rigid waist shift for beam 1, for the given <em>ip</em> and with the provided <em>waist_shift_setting</em>.</p></li>
<li><p>Perform matchings on beam 1 to reduce the impact of the waist shift on the optics, and retrieve all the relevant knobs.</p></li>
<li><p>Export beam 1 data to disk.</p></li>
<li><p>Run the nominal scenario for beam 2, corresponding to the provided <em>opticsfile</em> and working point.</p></li>
<li><p>Apply the rigid waist shift for beam 2, using the triplet powering knob determined when creating the waist shift for beam 1.</p></li>
<li><p>Perform matchings on beam 2 to reduce the impact of the waist shift on the optics, and retrieve all the relevant knobs.</p></li>
<li><p>Export beam 2 data to disk.</p></li>
<li><p>Write all knobs to disk, for their absolute values as well as change to nominal scenario.</p></li>
<li><p>Create various plots from the beam 1 and beam 2 data, and write them to disk.</p></li>
<li><p>Eventually display the plots in interactive <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> windows.</p></li>
<li><p>Exit.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to PyRWS’s Documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules/index.html" class="btn btn-neutral float-right" title="PYRWS Command Line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Felix Soubelet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
         .wy-nav-content { max-width: 67.5%; }
  </style>



</body>
</html>